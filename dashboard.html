<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - Fundación Kinal</title>
    <link rel="stylesheet" href="css/dashboard.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

    <!-- Header con el logo y perfil del usuario -->
    <header class="global-header">
        <div class="header-left-section">
            <div class="sidebar-toggle" id="sidebar-toggle-open">
                <i class="fas fa-bars"></i>
            </div>
            <img src="img/kinal-logo-2.png" alt="Logo Fundación Kinal" />
            <span>Fundación Kinal</span>
        </div>

        <div class="user-profile-widget" id="user-profile-widget">
            <div class="user-initials" id="user-initials"></div>
            <div class="user-dropdown-panel" id="user-dropdown-panel">
                <p><strong><span id="dropdown-user-name"></span></strong></p>
                <p><span id="dropdown-user-email"></span></p>
                <p><small>Rol: <span id="dropdown-user-role"></span></small></p>
                <!-- Botón de cerrar sesión -->
                <button id="dropdown-logout-button">Cerrar sesión</button>
            </div>
        </div>
    </header>

    <!-- Contenido del dashboard -->
    <div class="dashboard-container">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-toggle" id="sidebar-toggle-close">
                <i class="fas fa-times"></i>
            </div>
            <nav>
                <ul>
                    <!-- Eliminamos REPORTES y CONFIGURACION -->
                    <li><a href="#" id="link-dashboard" class="active">Inicio</a></li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <header class="section-header">
                <h1>Bienvenido al Dashboard</h1>
            </header>

            <section id="dashboard-home-section" class="content-section active">
                <h2>Panel Principal</h2>
                <p>Aquí puedes ver un resumen de tus actividades.</p>
                <!-- Contenido aquí -->
            </section>
        </main>
    </div>

    <script>
        // Referencia al botón de cerrar sesión
        const dropdownLogoutButton = document.getElementById('dropdown-logout-button');

        dropdownLogoutButton.addEventListener('click', () => {
            // Eliminar la información del usuario del localStorage
            localStorage.removeItem('usuario_actual');
            localStorage.removeItem('logueado');

            // Redirigir al login
            window.location.href = 'login.html';  // Redirige al login
        });

        // Al cargar la página, verificamos si el usuario está logueado
        document.addEventListener('DOMContentLoaded', () => {
            const usuarioActual = JSON.parse(localStorage.getItem('usuario_actual'));

            // Si no hay usuario logueado, redirigimos al login
            if (!usuarioActual || localStorage.getItem('logueado') !== 'si') {
                window.location.href = 'login.html';  // Redirige al login si no está logueado
                return;
            }

            // Si el usuario está logueado, mostramos su información
            document.getElementById('dropdown-user-name').textContent = usuarioActual.nombre;
            document.getElementById('dropdown-user-email').textContent = usuarioActual.email;
            document.getElementById('dropdown-user-role').textContent = usuarioActual.rol;
        });
    </script>
</body>
</html>
